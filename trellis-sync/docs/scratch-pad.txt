I still dont decided if java will do the ftp or with bash...

Remote to central
	# Prepre zip file: java
	zip_file=`java xxxx.jar ...RemoteToCentral config.file /zipdest-folder`
	if $? -ne 0 => error
	# Send zip file
	ftp $zip_file

	mv $zip_file $zip_file.send

	file: yyyyMMdd_HHmmss_<server_id>


Central processing zip files
	for file in incoming-zip-dir.zip order by date
		java xxxx.jar ...ProcessRemote config.file $file /zips-out
		if $? eq 0
			mv $file $file.done

****

Cron jobs remote:
- Prepare zip file for central
- Send zip file to central
- Check incoming zips

Cron jobs central
- Check incoming zips, one at a time
	> this also generates zip files for servers. /zips-out-dir/<server_id>/*
- Send zip file to remote servers, one cron per server (?)

Java process should deal with zips directly.

****

central:
newer record or not exists =>
	update or insert 
	send new record to remote databases including from originated 
	> If originated database receives again the record simply will not be updated.
older record =>
	send old record to remote databases
same => nothing

remote:
newer record or not exists =>
	update or insert 
same or older record =>
	nothing
	
We should send the newer to central...
But is supposed that if remote database has newer record will end on central later...

OLDER RECORD WINS ALLWAYS!

*******************************************

2015.04.01:

How the surveyors devices (device_master) are registered?
	Where should be added? Central then propagated to remote or remote propagated to central?
	
